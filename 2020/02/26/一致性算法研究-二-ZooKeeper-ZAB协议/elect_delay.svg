<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="696" height="369" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36&quot; version=&quot;7.9.5&quot; editor=&quot;www.draw.io&quot;&gt;&lt;diagram id=&quot;93847e8c-2cbb-071f-0b92-3fe37a6f9f7a&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(3,3)"><path d="M 40 31 L 671.76 32.97" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 32.99 L 669.75 36.97 L 671.76 32.97 L 669.78 28.97 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,22.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">3</span></div></div></foreignObject></g><path d="M 40 102 L 671.76 101.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 101 L 669.77 105.02 L 671.76 101.01 L 669.76 97.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,93.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">2</span></div></div></foreignObject></g><path d="M 40 182 L 671.76 181.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 181 L 669.77 185.02 L 671.76 181.01 L 669.76 177.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,173.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">1</span></div></div></foreignObject></g><g transform="translate(134.5,329.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="440" height="34"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 442px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 30px">ZooKeeper Leader选举-延迟选举</span></div></div></foreignObject></g><g transform="translate(4.5,113.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(2,5)</div></div></foreignObject></g><g transform="translate(4.5,42.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(3,5)</div></div></foreignObject></g><g transform="translate(4.5,193.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(1,6)</div></div></foreignObject></g><path d="M 80 182 L 164.8 40.66" fill="none" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 168.27 34.88 L 167.5 44.91 L 164.8 40.66 L 159.79 40.28 Z" fill="#9673a6" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 182 L 330.34 104.97" fill="none" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 336.79 102.99 L 329.52 109.93 L 330.34 104.97 L 326.87 101.33 Z" fill="#9673a6" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 102 L 133.42 39.67" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 137.82 34.55 L 135.38 44.31 L 133.42 39.67 L 128.54 38.45 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 102 L 201.39 176.7" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 207.14 180.24 L 197.12 179.36 L 201.39 176.7 L 201.84 171.69 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 90 32 L 191.48 96.58" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 197.17 100.2 L 187.16 99.16 L 191.48 96.58 L 191.99 91.57 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 90 32 L 165.25 173.08" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 168.42 179.04 L 160.22 173.22 L 165.25 173.08 L 168.16 168.98 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 550 32 L 632.02 95.8" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 637.35 99.94 L 627.49 97.97 L 632.02 95.8 L 633.01 90.86 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 550 32 L 625.25 173.08" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 628.42 179.04 L 620.22 173.22 L 625.25 173.08 L 628.16 168.98 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(544.5,153.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="100" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选择1为Leader</div></div></foreignObject></g><g transform="translate(82.5,229.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="516" height="100"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 516px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><ol><li>Server 2 没有收到Server 1的消息，所以选择了Server 3</li><li>Server 2 延迟选举Server 3为leader，他就可以收到Server1的消息</li><li>Server 1 收到了Server 3 的选举，同时他也选举自己，形成多数派(quroum)，因此成为Leader</li></ol></div></div></foreignObject></g><g transform="translate(213.5,80.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 20px" color="#cc0000"><b>1</b></font></div></div></foreignObject></g><g transform="translate(443.5,-0.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#cc0000"><span style="font-size: 20px"><b>2</b></span></font></div></div></foreignObject></g><g transform="translate(573.5,180.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#cc0000"><span style="font-size: 20px"><b>3</b></span></font></div></div></foreignObject></g><g transform="translate(653.5,193.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Time</div></div></foreignObject></g><path d="M 230 102 L 256.45 172.54" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 258.82 178.86 L 251.45 172.01 L 256.45 172.54 L 259.88 168.85 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 235 101 L 297.86 38.14" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 302.63 33.37 L 299.45 42.92 L 297.86 38.14 L 293.08 36.55 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(201.5,63.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="83" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选举Server3</div></div></foreignObject></g><path d="M 415 102 L 445.48 41.04" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 448.5 35 L 448.5 45.06 L 445.48 41.04 L 440.45 41.04 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(574.5,113.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="100" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选择1为Leader</div></div></foreignObject></g><path d="M 410 102 L 436.45 172.54" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 438.82 178.86 L 431.45 172.01 L 436.45 172.54 L 439.88 168.85 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 250 132 L 396.82 132" fill="none" stroke="#ff3333" stroke-width="10" stroke-miterlimit="10" pointer-events="none"/><path d="M 408.82 132 L 392.82 140 L 396.82 132 L 392.82 124 Z" fill="#ff3333" stroke="#ff3333" stroke-width="10" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(320.5,124.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="60" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">延迟选举</div></div></foreignObject></g></g></svg>