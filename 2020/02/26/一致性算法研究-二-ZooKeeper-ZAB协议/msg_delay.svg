<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="696" height="369" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36&quot; version=&quot;7.9.5&quot; editor=&quot;www.draw.io&quot;&gt;&lt;diagram id=&quot;93847e8c-2cbb-071f-0b92-3fe37a6f9f7a&quot; name=&quot;第 1 页&quot;&gt;7Ztfb6M4EMA/jaXuQ1dg88c8QprsSncnndSV7vbeCDgJWhJnidOm9+nPNoYAJi1pCBdt6cMujO1hmPkx2B4C0GR9+JKF29UfNCYpgEZ8AOgBQIhNzP8VgpdcYJtOLlhmSZyLzKPgMfmXKKGhpPskJrtaR0ZpypJtXRjRzYZErCYLs4w+17staFq/6jZcEk3wGIWpLv0ridlK3ZZtHOVfSbJcFVc2DdUyD6Mfy4zuN+p6AKKF/Mub12GhS/XfrcKYPldEaArQJKOU5Ufrw4SkwrWF2/JxsxOtpd0Z2bAuA2A+4ClM96SwWNrFXgpfkE3sC5fysygNd7skAihYsXXKBSY/3LGM/iATmtJMDkCG/CtbCgfyewsWSZpWek4mnjebCTndMEWBaavzNo3kkLC/1XXF8Xd+bHwWI+JwtyKxatK9oByzo/ssUvcF3VxG4hoLyk9fCF0Tlr3wDs9HAgoAVpXgF7KMpCFLnuoEhQrEZamuvMKfNOHWQUM9M6ar9KhHxsQNFbntalQ1pA1F2HxDEQuzJWGaIn5Que2jSBJzgh5Xw+cRQCdlIvjbcFMDyfm5F1TL2N7vZLB93sGEn+3t4djMj5bif1Qo4kbkunK5xicjB/YakRu6IQ30lChMk+VGYM0xIVwePJGMJTwL+KphncSxuEzwvEoYedyGkp1nnvK4TD7lEjnJevEgi5M0nJM0KFNB05KOsJ+kWJhJDq8yW7SiBguOl59XmLZamC7SUxu+NV5egwN/3NyC4E3nFmh5/eQWTVF/uaVw4TVyCxxzS/+5pUwkA+QWC33c3GLhm84tCPaUWzRF/eUWS3819ZZbzDG39J9bEBwut7hOS245jw1ktJHxD6W/EbLlEYPG7ySM+cHUA9gA2ANTCwQYBNN7MHVA4ACMxQGfufszMLVBEAjhlPeYAW82EtYDYU6dMAvrhDltaRP1gJjpmhpjd/x8Yn8ag3jJFMQZLk2Yrj5BvUNjDC+NoYmHW6Karq3HkJs7ccYYXvS6HnApYLr6JpQWvLPXAp7jotDR1gJIXwsQM7aJ24e/b2RCD5vz8OYbr+uEHhnNJ7uhqL8JveleY7NphOByCGzYeEXbV4TAuwIEc2xbtr4r0ALBAkckin5hCLTYdYUAarWN60FQqB4huDEIyknBqZTSJwT6+upyCJwIk/miCwRxSPDil4IAvvEAd4aguWK74usA6wu0EYKbgMAYMBP0MCcQAZuF6yQV9n4l6RMRy7czIqutAPvA6tZxcd6a/nfFxfGGyxneNWYPHzhn9AcBHi5nePquUGWn3gE4AL5nFnv2vtrLb2Iybhid3jByGrvv5RuhQmW5qdT7jpF3usJD02M1JZekSSF5JNmTLN6IsbJOA4FvigNvosjwLFmnsUX9JjDKAbyTCzwfYKutvDMDAR8/kRJJmQCLI2br0MkmrscpVVc/kzqa+orxSBrfVFw1tYH1eepN5Zu6J1rtNipeadbBKl6xAU/KuXs8VyqV7vHyA0/Uw1qGY4Bd4PuyeMZHmTWFwQPwobx3LJQXxqnhKgJYDfctYaS4ui3vhAeQt07vfu5ptl9/kgZyF8oW/0F0rynu6EourLLXey5JyYK1ZBJGt/9XGtnx6yWb5TdhwUNFoN6M6iygjNG1kvWQebSNLVfPPOWeVTXzlJ/4XpZ62vYpcwKEn0CH4jJsFJeNqHTuUYiiSLpZK0IXV5u3fa8wb6EyN2usMJ9NmrbURTppVyuKeG3Lnhpn76Km6wcQTUZPsAffYK/+dcOI5KVI2o1pl2kNV2uFRtvS6uaQRCOSw64EvBPrukGQ1D8j/ZasyRjAMwLoNhfmA9b+oWG15JRLt2s+cLEHNV4Q7y/2nHqsr/AjJKNlu2aE4BII7DoE7/21iIXqisoC/TUgaNnT0bYF8t0H1CG/Z4TPHMK57CBithU2SqvtANgPIrPvGd2paHddZ9eWvPfWwOsR3AgrtLREXS5yL8zU/PT4G9Y8nMffCaPpfw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(3,3)"><path d="M 40 31 L 671.76 32.97" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 32.99 L 669.75 36.97 L 671.76 32.97 L 669.78 28.97 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,22.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">3</span></div></div></foreignObject></g><path d="M 40 102 L 671.76 101.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 101 L 669.77 105.02 L 671.76 101.01 L 669.76 97.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,93.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">2</span></div></div></foreignObject></g><path d="M 40 182 L 671.76 181.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 181 L 669.77 185.02 L 671.76 181.01 L 669.76 177.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,173.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">1</span></div></div></foreignObject></g><g transform="translate(134.5,329.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="440" height="34"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 442px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 30px">ZooKeeper Leader选举-消息延迟</span></div></div></foreignObject></g><g transform="translate(4.5,113.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(2,5)</div></div></foreignObject></g><g transform="translate(4.5,42.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(3,5)</div></div></foreignObject></g><g transform="translate(4.5,193.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(1,6)</div></div></foreignObject></g><path d="M 80 182 L 164.8 40.66" fill="none" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 168.27 34.88 L 167.5 44.91 L 164.8 40.66 L 159.79 40.28 Z" fill="#9673a6" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 182 L 380.22 104.52" fill="none" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 386.75 102.84 L 379.16 109.44 L 380.22 104.52 L 376.91 100.73 Z" fill="#9673a6" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 102 L 133.42 39.67" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 137.82 34.55 L 135.38 44.31 L 133.42 39.67 L 128.54 38.45 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 102 L 201.39 176.7" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 207.14 180.24 L 197.12 179.36 L 201.39 176.7 L 201.84 171.69 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 90 32 L 191.48 96.58" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 197.17 100.2 L 187.16 99.16 L 191.48 96.58 L 191.99 91.57 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 90 32 L 165.25 173.08" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 168.42 179.04 L 160.22 173.22 L 165.25 173.08 L 168.16 168.98 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 470 32 L 552.02 95.8" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 557.35 99.94 L 547.49 97.97 L 552.02 95.8 L 553.01 90.86 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 470 32 L 545.25 173.08" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 548.42 179.04 L 540.22 173.22 L 545.25 173.08 L 548.16 168.98 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(544.5,153.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="100" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选择1为Leader</div></div></foreignObject></g><g transform="translate(82.5,229.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="516" height="100"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 516px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><ol><li>Server 2 没有收到Server 1的消息，所以选择了Server 3</li><li>Server 3 选择Server 1为Leader</li><li>Server 1 收到了Server 3 的选举，同时他也选举自己，形成了一个多数派(quorum)因此成为Leader</li></ol></div></div></foreignObject></g><g transform="translate(213.5,80.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 20px" color="#cc0000"><b>1</b></font></div></div></foreignObject></g><g transform="translate(443.5,-0.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#cc0000"><span style="font-size: 20px"><b>2</b></span></font></div></div></foreignObject></g><g transform="translate(573.5,180.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#cc0000"><span style="font-size: 20px"><b>3</b></span></font></div></div></foreignObject></g><g transform="translate(653.5,193.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Time</div></div></foreignObject></g><path d="M 230 102 L 256.45 172.54" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 258.82 178.86 L 251.45 172.01 L 256.45 172.54 L 259.88 168.85 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 235 101 L 297.86 38.14" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 302.63 33.37 L 299.45 42.92 L 297.86 38.14 L 293.08 36.55 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(256.5,78.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="83" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选举Server3</div></div></foreignObject></g></g></svg>