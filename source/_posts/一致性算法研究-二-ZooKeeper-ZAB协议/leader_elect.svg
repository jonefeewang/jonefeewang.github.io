<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="706" height="398" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36&quot; version=&quot;7.9.5&quot; editor=&quot;www.draw.io&quot;&gt;&lt;diagram id=&quot;93847e8c-2cbb-071f-0b92-3fe37a6f9f7a&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(3,3)"><path d="M 40 60 L 671.76 61.97" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 61.99 L 669.75 65.97 L 671.76 61.97 L 669.78 57.97 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,51.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">3</span></div></div></foreignObject></g><path d="M 40 131 L 671.76 130.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 130 L 669.77 134.02 L 671.76 130.01 L 669.76 126.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,122.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">2</span></div></div></foreignObject></g><path d="M 40 211 L 671.76 210.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 677.76 210 L 669.77 214.02 L 671.76 210.01 L 669.76 206.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(11.5,202.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">1</span></div></div></foreignObject></g><g transform="translate(199.5,358.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="310" height="34"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 312px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 30px">ZooKeeper Leader选举</span></div></div></foreignObject></g><g transform="translate(4.5,142.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(2,5)</div></div></foreignObject></g><g transform="translate(4.5,71.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(3,5)</div></div></foreignObject></g><g transform="translate(4.5,222.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="30" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 32px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">(1,6)</div></div></foreignObject></g><path d="M 80 211 L 164.8 69.66" fill="none" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 168.27 63.88 L 167.5 73.91 L 164.8 69.66 L 159.79 69.28 Z" fill="#9673a6" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 211 L 162.45 137.71" fill="none" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 167.49 133.23 L 163.76 142.57 L 162.45 137.71 L 157.78 135.84 Z" fill="#9673a6" stroke="#9673a6" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 131 L 133.42 68.67" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 137.82 63.55 L 135.38 73.31 L 133.42 68.67 L 128.54 67.45 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 131 L 201.39 205.7" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 207.14 209.24 L 197.12 208.36 L 201.39 205.7 L 201.84 200.69 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 90 61 L 191.48 125.58" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 197.17 129.2 L 187.16 128.16 L 191.48 125.58 L 191.99 120.57 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 90 61 L 165.25 202.08" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 168.42 208.04 L 160.22 202.22 L 165.25 202.08 L 168.16 197.98 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(201.5,31.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="106" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 108px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">收到(1,6)和(2,5)</div></div></foreignObject></g><g transform="translate(201.5,102.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="106" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 108px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">收到(1,6)和(3,5)</div></div></foreignObject></g><g transform="translate(201.5,182.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="106" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 108px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">收到(2,5)和(3,5)</div></div></foreignObject></g><g transform="translate(352.5,32.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="104" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 106px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">改变vote为(1,6)</div></div></foreignObject></g><g transform="translate(352.5,102.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="104" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 106px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">改变vote为(1,6)</div></div></foreignObject></g><g transform="translate(374.5,182.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="60" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 61px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">不做改变</div></div></foreignObject></g><path d="M 470 61 L 552.02 124.8" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 557.35 128.94 L 547.49 126.97 L 552.02 124.8 L 553.01 119.86 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 470 61 L 545.25 202.08" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 548.42 208.04 L 540.22 202.22 L 545.25 202.08 L 548.16 197.98 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 490 131 L 572.45 204.29" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 577.49 208.77 L 567.78 206.16 L 572.45 204.29 L 573.76 199.43 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 490 130 L 552.8 68.09" fill="none" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 557.61 63.35 L 554.36 72.88 L 552.8 68.09 L 548.04 66.47 Z" fill="#b85450" stroke="#b85450" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(584.5,32.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="100" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选择1为Leader</div></div></foreignObject></g><g transform="translate(584.5,102.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="100" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选择1为Leader</div></div></foreignObject></g><g transform="translate(584.5,182.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="100" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">选择1为Leader</div></div></foreignObject></g><g transform="translate(82.5,258.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="508" height="82"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 509px; white-space: nowrap; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><ol><li>Server 1发出(1,6)vote, Server 2发出(2,5)，Server 3发出(3,5)</li><li>Server 2改变他们的Vote为(1,6)，发出新的选举</li><li>所有Server收到一样的选举信息(1,6)，超过法定人数后, 选举1为Leader</li></ol></div></div></foreignObject></g><g transform="translate(13.5,-0.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 20px" color="#cc0000"><b>1</b></font></div></div></foreignObject></g><g transform="translate(393.5,-0.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#cc0000"><span style="font-size: 20px"><b>2</b></span></font></div></div></foreignObject></g><g transform="translate(563.5,-0.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="12" height="22"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 12px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#cc0000"><span style="font-size: 20px"><b>3</b></span></font></div></div></foreignObject></g><g transform="translate(653.5,222.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="32" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Time</div></div></foreignObject></g></g></svg>