<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="710" height="366" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36&quot; version=&quot;7.9.5&quot; editor=&quot;www.draw.io&quot;&gt;&lt;diagram id=&quot;93847e8c-2cbb-071f-0b92-3fe37a6f9f7a&quot; name=&quot;第 1 页&quot;&gt;7Vtbk6MoFP41PM6Ughp9VDuZrdqZqqnqrdrLm1GSWEPEVdJJz69fQLxrku42ma5t8zADBzgc+D4OHLAB8venL1mQ7r7RCBMAtegE0AOA0LZt/q8QPBcCY6EXgm0WR4WoIXiMf2Il1JT0EEc4b1VklBIWp21hSJMEh6wlC7KMHtvVNpS0e02DLe4JHsOA9KV/xhHbqWGZWi3/DcfbXdmzrqmSdRD+2Gb0kKj+AEQb+SuK90GpS9XPd0FEjw0RWgLkZ5SyIrU/+ZiIqS2nrWi3Gimt7M5wwq5pAIsGTwE54NJiaRd7LucCJ5ErppTnQhLkeRwC5O3YnnCBzpM5y+gP7FNCM9kAafJXlZQTyMfmbWJCGjV933FWKyGnCVMs0E2VH9KITzH7S/Ur0n/ztPZZtIiCfIcjVdSfBTUxOT1koRoXXBQyHLW4oObpC6Z7zLJnXuFYM6AkwK4BfinLMAlY/NRmUKCIuK3UVT18pzG3DmpqzegLpUctGd3uqChsV62akHYU2foFRSzItpj1FPFEY9i1SDJmhD2LHn0eAbQIE+CnQdIikvXvQbBaYvspl2C7vIIOP5vpqS7mqa34H5WKuBGFrkLe4yfDJ3aOkQlNcId6ShSQeJsIWnOaYC73nnDGYu4FXFWwj6NIdOMddzHDj2kguXPkLo/L5CqXlJNcLxeyyJBgjYlXuYKuJVeSfZTFwkx8OsvZshR1uGA5Rb7BaWOA06V7GqJviy/nyGF/XN+C4Lv2LdBwpvEtPUXT+ZZyCm/hW+DsW6b3LZUjuYNvMdDH9S2G/a59C4IT+Zaeoul8i9HfmibzLfrsW6b3LQjez7csrAHf8jJuIG2IGf9Q+jvGKUeMm7k0gOcC2wNLE9gucHWwtIC9Ak5Z5BozkSYgEmwTybDMHpGsIe+IJmCSXt56DFBJjFleYJTDrtmCwlBOQI9AX3EQCfZUtCiUzLR4+9nFup9/0Rfmq1ghRi/ukbqsWFFC6HHmxU32nTueaXVnfOOhpIazkJC44xXEPsK3D10mFnwHSTOa0jwgYMlzHnAcucM4wNZEwvFFmhc5fBcyNn0O1R30u6yq8764IteWqpfANaVqvn9Z0gwbeFpthik2N16rtkdZyoG/smPRxHsADiJq0KPdComHgGMKibsUwxR1TFnkiH75bJXDFwaIXXdV7sM6cFcNg1fA49Pl9+c4pPt9zGRflui3bqvGeNXEcmET4MnXK8EbNrBaGU1/1VLl55kwTrZ/CAseGgKeQ3XOo4zRvZJNsLphN8JY9Fe3CQeWd3W9/6b7MO0WQavvDwataIKgdXTG30nkCTtnu0rvSyNPaHd40T38TXhjrhkzCd4nCZzus8kNSTB0ApxJ8GoSGNoF7K4lgWFdYNOUJBg67s0keDUJkHPBi79LEvRfUGcSvIEEZvel67XbgdWNBG95JrjFS+lMgglIYNzxTOD0SPBdhs64DBOj+KkROQZ7EakR9eTg65WoG1q2ml2MLTOcxz+DtawgsE7F2ORoTQ+YDyKqPDCaK5ZcG2S24r1Pxn0vdaC1aKOIVL7BxsUAGw1tnHhXB31lyDlwqdMAxg1DnLIx0Gb43wI/6kR3Q/BbN4N//AWgAYxfXCPN8N8Afqv7ORzqfwJ1u9UPR+H/NVf9/0OAdd3sbNLXATzJN276+FvOuruCzyG+2SD+O/81QRvqSrz+2PBXcXR52IN99z50pzsN/ONPNpPAj2b4X+je4cCXIreDfyh6nxB+OMN/AX5DM+8FP8/Wf5dRRHj1376g5X8=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(3,3)"><path d="M 55 42 L 686.76 43.97" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 692.76 43.99 L 684.75 47.97 L 686.76 43.97 L 684.78 39.97 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(26.5,33.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">3</span></div></div></foreignObject></g><path d="M 55 113 L 686.76 112.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 692.76 112 L 684.77 116.02 L 686.76 112.01 L 684.76 108.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(26.5,104.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">2</span></div></div></foreignObject></g><path d="M 55 193 L 686.76 192.01" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/><path d="M 692.76 192 L 684.77 196.02 L 686.76 192.01 L 684.76 188.02 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(26.5,184.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 18px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">S<span style="font-size: 12.5px">1</span></div></div></foreignObject></g><g transform="translate(191.5,325.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="276" height="34"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 278px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span style="font-size: 30px">ZooKeeper 事务提交</span></div></div></foreignObject></g><g transform="translate(11.5,124.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="46" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 48px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#cc0000">Leader</font></div></div></foreignObject></g><g transform="translate(6.5,204.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="56" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 58px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#0000ff">Follower</font></div></div></foreignObject></g><g transform="translate(97.5,240.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="475" height="82"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 476px; white-space: nowrap; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><ol><li>Leader发出proposal给所有的follower</li><li>follower在接收到proposal后给出ack</li><li>当leader接收到法定数量的ack信息后，发出commit消息给follower</li></ol></div></div></foreignObject></g><path d="M 105 113 L 158.94 184.92" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 162.99 190.32 L 153.99 185.82 L 158.94 184.92 L 161.19 180.42 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 105 113 L 167.86 50.14" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 172.63 45.37 L 169.45 54.92 L 167.86 50.14 L 163.08 48.55 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 285 43 L 338.42 105.33" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 342.82 110.45 L 333.54 106.55 L 338.42 105.33 L 340.38 100.69 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 275 193 L 338.35 120.6" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 342.79 115.52 L 340.25 125.26 L 338.35 120.6 L 333.48 119.33 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 455 113 L 508.94 184.92" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 512.99 190.32 L 503.99 185.82 L 508.94 184.92 L 511.19 180.42 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 455 113 L 517.86 50.14" fill="none" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 522.63 45.37 L 519.45 54.92 L 517.86 50.14 L 513.08 48.55 Z" fill="#cc0000" stroke="#cc0000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(153.5,2.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="56" height="34"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Propose<div>&lt;1,1&gt;</div></div></div></foreignObject></g><g transform="translate(266.5,2.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="46" height="34"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>Accept</div><div>&lt;1,1&gt;</div></div></div></foreignObject></g><g transform="translate(496.5,4.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="52" height="34"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>Commit</div><div>&lt;1,1&gt;</div></div></div></foreignObject></g><g transform="translate(1.5,54.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="57" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#0000ff">Follower</font></div></div></foreignObject></g><g transform="translate(92.5,92.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><b><font color="#ff3333">1</font></b></div></div></foreignObject></g><g transform="translate(496.5,85.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><b><font color="#ff3333">3</font></b></div></div></foreignObject></g><g transform="translate(291.5,85.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 15px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><b><font color="#ff3333">2</font></b></div></div></foreignObject></g></g></svg>